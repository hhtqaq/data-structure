## B-树
### 1.1 介绍
&emsp;&emsp;前面介绍的查找方法均适用于存储在计算机内存中较小的文件，统称为**内查找法**。若文件很大
存放于外村进行查找时，这些查找方法就不适用了。内查找法都以结点为单位进行查找，这样需要反复地
进行内、外存交换，是很费时间的。1970年，R.Bayer和E.Mccreight提出了一种适用于**外查找**的**平衡多
叉树——B-树，磁盘管理系统中的目录管理，以及数据库系统中的索引组织多数都采用B-树这种
数据结构**

#### 1.1.1 B-树的定义
&emsp;&emsp;一颗m阶的B-树，或为空树，或为满足以下特性的m叉树：

   - 1）树中每个节点至多有m颗子树。

   - 2）若根节点不是叶子结点，则至少有两棵子树。
   
   - 3）除根之外的所有非终端结点至少有[m/2]颗子树；
   
   - 4)所有的叶子结点都出现在同一层次上，并且不带信息，通常称为失败结点。失败结点并不存在，
   指向这些节点的指针为空。引入失败结点是为了便于分析B-树的查找性能。
   
   - 5) 所有的非终端结点最多有m-1个关键字，结点的结构如图

&emsp;&emsp;若将二叉树上节点的**平衡因子**定义为该节点的左右子树的深度之差，则平衡二叉树上所有
结点的平衡因子只可能是-1、0和1。所以只要二叉树上有一个结点的平衡因子的绝对值大于1，则该二叉
树就是不平衡的。

&emsp;&emsp;因为AVL树上人和结点的左右子树的深度之差都不差过1，则可以证明他的时间复杂度为logn。

#### 1.1.2 平衡二叉树的平衡调整方法
&emsp;&emsp;如何创建一颗平衡二叉树呢？插入结点时，首先按照二叉排序树处理，若插入结点后破坏了
平衡二叉树的特性，需对平衡二叉树进行调整。调整方法是：找到里插入节点最近且平衡因子绝对值超过
1的祖先结点，以该节点为根的字数称为最小不平衡子树，可将重新平衡的范围局限于这棵子树。

&emsp;&emsp;一般情况下，假设最小不平衡子树的根结点为A，则失去平衡后进行调整的规律课归纳为下列4
种情况。

 - (1)LL型(插入发生在左子树的左结点)：右旋
 
  ![Image text](https://github.com/hhtqaq/data-structure/raw/master/myAvlTree/img-file/ll.png)
 - (2)RR型(插入发生在右子树的右结点)：左旋
 
  ![Image text](https://github.com/hhtqaq/data-structure/raw/master/myAvlTree/img-file/rr.png)
 - (3)LR型(插入发生在左子树的右结点)：先左旋变成LL型，再右旋
 
  ![Image text](https://github.com/hhtqaq/data-structure/raw/master/myAvlTree/img-file/lr.png)
 - (4)RL型(插入发生在右子树的左结点)：先右旋变成RR型，再左旋
 
  ![Image text](https://github.com/hhtqaq/data-structure/raw/master/myAvlTree/img-file/rl.png)
  
#### 1.1.3 平衡二叉树的插入

   - 【算法思想】
   
     1.二叉排序树的插入
    
     2.插入后高度修改为左右最大子树高度+1
     
     3.判断左右子树高度差是否小于2，判断结点是否失衡
     
     4.当前结点node失衡：
     
     插入发生在左子树的左结点，单右旋rightRotate(node)
      
     插入发生在左子树的右结点，先左旋node.left=leftRotate(node.left) 再rightRotate(node)
    
     插入发生在右子树的右结点，单左旋leftRotate(node)
    
     插入发生在右子树的左结点，先右旋node.right=rightRotate(node.right) 再leftRotate(node)

    
**说明：**

&emsp;&emsp;完全二叉树，二叉查找树，平衡二叉树都是从**内存**中查找数据，相对顺序存储、链表来说
能够提升查找效率，但如果是海量数据，无法一次性读到内存中时，这些数据结构就不在适用。
此时就需要研究从**磁盘**中查找海量数据的方法，就引入了b树和b+树